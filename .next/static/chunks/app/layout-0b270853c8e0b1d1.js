(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1055:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>S});var a=r(5155),o=r(7270),s=r(4861),n=r(6813),i=r(3580),c=r(2115),l=r(6621),d=r(2085),u=r(4416),f=r(3999);let p=l.Kq,h=c.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(l.LM,{ref:t,className:(0,f.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...o})});h.displayName=l.LM.displayName;let m=(0,d.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),g=c.forwardRef((e,t)=>{let{className:r,variant:o,...s}=e;return(0,a.jsx)(l.bL,{ref:t,className:(0,f.cn)(m({variant:o}),r),...s})});g.displayName=l.bL.displayName,c.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(l.rc,{ref:t,className:(0,f.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...o})}).displayName=l.rc.displayName;let v=c.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(l.bm,{ref:t,className:(0,f.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...o,children:(0,a.jsx)(u.A,{className:"h-4 w-4"})})});v.displayName=l.bm.displayName;let y=c.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,f.cn)("text-sm font-semibold",r),...o})});y.displayName=l.hE.displayName;let x=c.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,f.cn)("text-sm opacity-90",r),...o})});function w(){let{toasts:e}=(0,i.dj)();return(0,a.jsxs)(p,{children:[e.map(function(e){let{id:t,title:r,description:o,action:s,...n}=e;return(0,a.jsxs)(g,{...n,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[r&&(0,a.jsx)(y,{children:r}),o&&(0,a.jsx)(x,{children:o})]}),s,(0,a.jsx)(v,{})]},t)}),(0,a.jsx)(h,{})]})}function S(e){let{children:t}=e;return(0,a.jsx)(n.A,{locale:"en-US",children:(0,a.jsx)(o.B,{children:(0,a.jsxs)(s.O,{children:[t,(0,a.jsx)(w,{})]})})})}x.displayName=l.VY.displayName},2635:(e,t,r)=>{Promise.resolve().then(r.bind(r,1055)),Promise.resolve().then(r.t.bind(r,4942,23)),Promise.resolve().then(r.t.bind(r,3175,23)),Promise.resolve().then(r.t.bind(r,9324,23))},3580:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f});var a=r(2115);let o=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=i(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(l);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2596),o=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,a.$)(t))}},4861:(e,t,r)=>{"use strict";r.d(t,{O:()=>i,c:()=>n});var a=r(5155),o=r(2115),s=r(6194);let n=(0,o.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,o.useState)(null),[c,l]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{if(!localStorage.getItem("accessToken")){l(!1);return}try{let e=await s.y.getCurrentUser();i(e)}catch(e){console.error("Invalid access token, logging out."),localStorage.removeItem("accessToken")}finally{l(!1)}})()},[]);let d=async()=>{try{await s.y.logout()}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("accessToken"),i(null)}};return(0,a.jsx)(n.Provider,{value:{user:r,logout:d,isLoading:c},children:t})}},6194:(e,t,r)=>{"use strict";r.d(t,{y:()=>o});class a{async login(e,t){let r=await fetch("".concat(this.baseUrl,"/api/").concat("luxesuite","/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error((await r.json()).message||"Login failed");return await r.json()}async register(e){let t=await fetch("".concat(this.baseUrl,"/api/register"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).message||"Registration failed");return await t.json()}async exchangeAuthorizationCode(e){let t=sessionStorage.getItem("pkce_code_verifier");if(!t)throw Error("PKCE code verifier missing. Please start the login process again.");let r=new URLSearchParams;r.append("grant_type","authorization_code"),r.append("client_id","01987968-d176-71f4-a12f-eb25a88f0dcf"),r.append("redirect_uri","".concat("http://localhost:3000","/auth/callback")),r.append("code",e),r.append("code_verifier",t);let a=await fetch("".concat("http://localhost:8000","/oauth/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}),o=await a.json();if(!a.ok)throw console.error("OAuth token error response:",o),Error(o.error_description||"Failed to exchange authorization code");return sessionStorage.removeItem("pkce_code_verifier"),o}async getUser(e){let t=await fetch("".concat("http://localhost:8000","/api/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Failed to fetch user");return t.json()}async getCurrentUser(){let e=localStorage.getItem("accessToken"),t=await fetch("".concat(this.baseUrl,"/api/me"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}});if(!t.ok)throw Error("User fetch failed");return(await t.json()).data}async refreshAccessToken(){let e=await fetch("".concat(this.baseUrl,"/api/refresh-token"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Token refresh failed");return(await e.json()).access_token}async logout(){try{localStorage.removeItem("accessToken"),await fetch("".concat(this.baseUrl,"/api/logout"),{method:"POST",credentials:"include"})}catch(e){console.error("Logout failed:",e)}}constructor(){this.baseUrl="http://localhost:8000"}}let o=new a},7270:(e,t,r)=>{"use strict";r.d(t,{B:()=>n,H:()=>i});var a=r(5155),o=r(2115);let s=(0,o.createContext)({currency:"PHP",setCurrency:()=>{}}),n=e=>{let{children:t}=e,[r,n]=(0,o.useState)("PHP");return(0,o.useEffect)(()=>{{let e=localStorage.getItem("currency");e?n(e):n({"en-PH":"PHP","en-US":"USD","en-GB":"GBP"}[navigator.language]||"PHP")}},[]),(0,a.jsx)(s.Provider,{value:{currency:r,setCurrency:e=>{n(e),localStorage.setItem("currency",e)}},children:t})},i=()=>(0,o.useContext)(s)},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[976,533,352,73,386,707,441,684,358],()=>t(2635)),_N_E=e.O()}]);