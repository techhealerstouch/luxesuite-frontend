(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51],{3580:(e,t,n)=>{"use strict";n.d(t,{dj:()=>u});var a=n(2115);let s=0,r=new Map,i=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?i(n):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=l(c,e),d.forEach(e=>{e(c)})}function m(e){let{...t}=e,n=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:n});return o({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||a()}}}),{id:n,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},4945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>er});var a=n(5155),s=n(2115),r=n(5695),i=n(5499),l=n(6639),d=n(8054),c=n(8482),o=n(8327),m=n(7168),u=n(9840),x=n(3550),h=n(238),p=n(7108),f=n(1586),g=n(3667);function v(e){var t,n;let{user:i}=e,[l,v]=(0,s.useState)(!1),[b,j]=(0,s.useState)([]),[N,y]=(0,s.useState)(null),w=(0,r.useRouter)(),{user:A}=(0,g.A)();if(!A)return console.error("No logged in user found!"),null;let _=null===(t=i.roles)||void 0===t?void 0:t.some(e=>"authenticator"===e.name);(0,s.useEffect)(()=>{l&&d.K.getAllCredits().then(e=>{var t;j((null!==(t=null==e?void 0:e.data)&&void 0!==t?t:e)||[])})},[l]);let C=e=>{if(!e)return(0,a.jsx)(x.A,{className:"w-8 h-8 text-primary mr-4"});let t=e.toLowerCase();return t.includes("starter")?(0,a.jsx)(h.A,{className:"w-8 h-8 text-primary mr-4"}):t.includes("basic")?(0,a.jsx)(p.A,{className:"w-8 h-8 text-primary mr-4"}):t.includes("standard")?(0,a.jsx)(f.A,{className:"w-8 h-8 text-primary mr-4"}):(0,a.jsx)(x.A,{className:"w-8 h-8 text-primary mr-4"})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.Zp,{className:"mb-6 shadow-lg rounded-2xl border border-gray-200",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg font-semibold",children:"User Information"}),(0,a.jsx)(c.BT,{className:"text-sm text-gray-500",children:"Overview of user details and account status"})]}),(0,a.jsxs)(c.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Name:"})," ",i.name]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Email:"})," ",i.email]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Role:"})," ",null===(n=i.roles)||void 0===n?void 0:n.map(e=>"main_user"===e.name?"Main User":"sub_user"===e.name?"Sub User":"authenticator"===e.name?"Authenticator":e.name).join(", ")]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Status:"}),(0,a.jsx)(o.P,{status:i.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Service:"})," ",i.service||"-"]}),_&&i.authenticator_credits&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Credits:"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:i.authenticator_credits.credits})," authentication(s)"]}),(0,a.jsx)(m.$,{variant:"outline",className:"text-primary border-primary hover:bg-primary hover:text-white h-6 px-2 py-0 text-xs rounded-full",onClick:()=>v(!0),children:"+ Add"})]})]})]}),(0,a.jsx)(u.lG,{open:l,onOpenChange:v,children:(0,a.jsxs)(u.Cf,{className:"max-w-lg",children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsx)(u.L3,{children:"Select a Credit Package"}),(0,a.jsx)(u.rr,{children:"Choose from the available credit packages below to top up your account. Each package includes a set number of authentications."})]}),(0,a.jsx)("div",{className:"space-y-4 mt-4",children:b.map(e=>(0,a.jsx)(c.Zp,{className:"cursor-pointer border-2 transition-all ".concat((null==N?void 0:N.id)===e.id?"border-primary shadow-md":"border-gray-200"),onClick:()=>y(e),children:(0,a.jsxs)(c.Wu,{className:"flex items-center justify-between p-4",children:[C(e.name),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-green-600",children:[e.quantity," authentications"]}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:e.description})]}),(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsxs)("p",{className:"text-base font-bold text-primary",children:["â‚±",e.price]})})]})},e.id))}),(0,a.jsx)(u.Es,{className:"mt-6",children:(0,a.jsx)(m.$,{onClick:()=>{if(!N)return alert("Select a package first.");w.push("/checkout/credits/".concat(N.id,"?user=").concat(i.id,"&added_by=").concat(A.id))},disabled:!N,children:"Check Out"})})]})})]})}var b=n(2900),j=n(9852),N=n(8524),y=n(2657),w=n(3717),A=n(2525);let _=[{model:"M-001",serial:"SN-12345",name:"Product A",price:"$200",status:"Active"},{model:"M-002",serial:"SN-67890",name:"Product B",price:"$150",status:"Inactive"},{model:"M-003",serial:"SN-54321",name:"Product C",price:"$500",status:"Active"}];function C(){let[e,t]=(0,s.useState)(""),n=_.filter(t=>t.model.toLowerCase().includes(e.toLowerCase())||t.serial.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase()));return(0,a.jsxs)(c.Zp,{className:"shadow-lg rounded-2xl border border-gray-200",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg font-semibold",children:"Products"}),(0,a.jsx)(c.BT,{children:"List of products created by this user."})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)(j.p,{placeholder:"Search products...",value:e,onChange:e=>t(e.target.value),className:"max-w-xs"})}),(0,a.jsx)("div",{className:"overflow-x-auto w-full",children:(0,a.jsxs)(N.XI,{className:"min-w-full table-auto",children:[(0,a.jsx)(N.A0,{children:(0,a.jsxs)(N.Hj,{children:[(0,a.jsx)(N.nd,{children:"Model #"}),(0,a.jsx)(N.nd,{children:"Serial #"}),(0,a.jsx)(N.nd,{children:"Name"}),(0,a.jsx)(N.nd,{children:"Price"}),(0,a.jsx)(N.nd,{children:"Status"}),(0,a.jsx)(N.nd,{className:"text-right",children:"Action"})]})}),(0,a.jsx)(N.BF,{children:n.map((e,t)=>(0,a.jsxs)(b.P.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t,duration:.3,ease:"easeOut"},children:[(0,a.jsx)(N.nA,{children:e.model}),(0,a.jsx)(N.nA,{children:e.serial}),(0,a.jsx)(N.nA,{children:e.name}),(0,a.jsx)(N.nA,{children:e.price}),(0,a.jsx)(N.nA,{children:e.status}),(0,a.jsxs)(N.nA,{className:"flex gap-2 justify-end",children:[(0,a.jsx)(m.$,{size:"sm",variant:"ghost",children:(0,a.jsx)(y.A,{})}),(0,a.jsx)(m.$,{size:"sm",variant:"ghost",children:(0,a.jsx)(w.A,{})}),(0,a.jsx)(m.$,{size:"sm",variant:"ghost",children:(0,a.jsx)(A.A,{})})]})]},t))})]})}),(0,a.jsxs)("div",{className:"flex justify-end mt-4 space-x-2",children:[(0,a.jsx)(m.$,{size:"sm",variant:"ghost",children:"Previous"}),(0,a.jsx)(m.$,{size:"sm",variant:"ghost",children:"Next"})]})]})]})}var S=n(5452),T=n(704),E=n(8293),k=n(7434),R=n(3064),O=n(3314),I=n(9397),L=n(4416),z=n(1788),D=n(2564),P=n(8145);let F=e=>{let t=window.open("","_blank");if(!t){console.error("Could not open print window");return}console.log(JSON.stringify(e,null,2));let n=U(e);t.document.write(n),t.document.close(),t.onload=()=>{setTimeout(()=>{t.print(),t.close()},500)}},U=e=>{var t,n;let a=(null===(t=e.authenticity_verdict)||void 0===t?void 0:t.toLowerCase())==="authentic"||(null===(n=e.authenticity_verdict)||void 0===n?void 0:n.toLowerCase())==="genuine";return"\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Watch Authentication Report</title>\n      <style>\n        ".concat(M(a),'\n      </style>\n    </head>\n    <body>\n      <div class="certificate">\n        ').concat(W(),"\n        ").concat(B(e),"\n        ").concat($(e),"\n        ").concat(Y(e),"\n        ").concat(Z(e),"\n      </div>\n    </body>\n    </html>\n  ")},M=e=>'\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n  \n  body {\n    font-family: Times, "Times New Roman", serif;\n    line-height: 1.4;\n    color: #000;\n    background: white;\n    padding: 1rem;\n    font-size: 12px;\n  }\n  \n  .certificate {\n    max-width: 210mm;\n    margin: 0 auto;\n    background: white;\n    padding: 2rem;\n  }\n  \n  .header {\n    text-align: center;\n    margin-bottom: 2rem;\n    border-bottom: 2px solid #000;\n    padding-bottom: 1rem;\n  }\n  \n  .company-name {\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 0.5rem;\n    letter-spacing: 2px;\n  }\n  \n  .company-info {\n    font-size: 10px;\n    line-height: 1.3;\n    margin-bottom: 1rem;\n  }\n  \n  .report-title {\n    font-size: 18px;\n    font-weight: bold;\n    margin: 1rem 0;\n    letter-spacing: 1px;\n  }\n  \n  .report-meta {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 2rem;\n    font-size: 11px;\n    font-weight: bold;\n  }\n  \n  .content-grid {\n    display: grid;\n    grid-template-columns: 2fr 1fr;\n    gap: 2rem;\n    margin-bottom: 2rem;\n  }\n  \n  .left-column {\n    border-right: 1px solid #ccc;\n    padding-right: 2rem;\n  }\n  \n  .right-column {\n    text-align: center;\n  }\n  \n  .watch-image-placeholder {\n    width: 200px;\n    height: 200px;\n    border: 1px solid #ccc;\n    margin: 0 auto 1rem auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 11px;\n    color: #666;\n    background: #f9f9f9;\n  }\n  \n  .section-title {\n    font-weight: bold;\n    font-size: 12px;\n    margin: 1rem 0 0.5rem 0;\n    text-transform: uppercase;\n    border-bottom: 1px solid #000;\n    padding-bottom: 2px;\n  }\n  \n  .detail-row {\n    display: flex;\n    margin-bottom: 0.3rem;\n    font-size: 11px;\n  }\n  \n  .detail-label {\n    font-weight: bold;\n    width: 140px;\n    flex-shrink: 0;\n  }\n  \n  .detail-value {\n    flex: 1;\n  }\n  \n  .description {\n    text-align: justify;\n    line-height: 1.5;\n    margin-bottom: 1rem;\n    font-size: 11px;\n  }\n  \n  .verdict-section {\n    margin: 2rem 0;\n    text-align: center;\n    padding: 1rem;\n    border: 2px solid #000;\n  }\n  \n  .verdict-title {\n    font-weight: bold;\n    font-size: 14px;\n    margin-bottom: 0.5rem;\n  }\n  \n  .verdict-value {\n    font-size: 16px;\n    font-weight: bold;\n    '.concat(e?"color: #006600;":"color: #cc0000;","\n  }\n  \n  .footer {\n    margin-top: 3rem;\n    text-align: center;\n    border-top: 1px solid #000;\n    padding-top: 1rem;\n  }\n  \n  .certification {\n    margin-top: 2rem;\n    text-align: center;\n  }\n  \n  .cert-seal {\n    width: 80px;\n    height: 80px;\n    border: 3px solid #DAA520;\n    border-radius: 50%;\n    margin: 1rem auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #FFFACD;\n    font-size: 10px;\n    font-weight: bold;\n    color: #B8860B;\n  }\n  \n  .appraiser-info {\n    font-size: 11px;\n    margin-top: 1rem;\n  }\n  \n  .signature-line {\n    border-bottom: 1px solid #000;\n    width: 200px;\n    margin: 2rem auto 0.5rem auto;\n  }\n  \n  @media print {\n    body { \n      padding: 0.5rem; \n    }\n    .certificate { \n      padding: 1rem;\n    }\n  }\n  \n  @page {\n    margin: 1cm;\n    size: A4;\n  }\n"),W=()=>'\n  <div class="header">\n    <div class="company-name">WATCH AUTHENTICATION</div>\n    <div class="company-info">\n      Professional Watch Appraisal Services<br>\n      Email: info@watchauth.com<br>\n      Phone: (555) 123-4567<br>\n      www.watchauthentication.com\n    </div>\n    <div class="report-title">WATCH AUTHENTICATION REPORT</div>\n  </div>\n',B=e=>'\n  <div class="report-meta">\n    <div><strong>REPORT NUMBER:</strong> AUTH'.concat(e.id,"</div>\n    <div><strong>DATE:</strong> ").concat(new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"</div>\n  </div>\n"),$=e=>'\n  <div class="content-grid">\n    <div class="left-column">\n      '.concat(V(e),"\n      ").concat(H(e),'\n    </div>\n    <div class="right-column">\n      <div class="watch-image-placeholder">\n        Watch Image<br>\n        ').concat(e.name||"N/A","\n      </div>\n    </div>\n  </div>\n"),V=e=>{var t;return'\n  <div class="section-title">Description</div>\n  <div class="description">\n    '.concat(e.brand||"Unknown Brand"," ").concat(e.name||"Watch"," with \n    ").concat((null===(t=e.serial_info)||void 0===t?void 0:t.model_number)?"model number ".concat(e.serial_info.model_number):"unspecified model",".\n    ").concat(e.estimated_production_year?"Estimated production year: ".concat(e.estimated_production_year,"."):"","\n    ").concat(e.final_summary||"Complete authentication analysis performed according to industry standards.","\n  </div>\n")},H=e=>{var t,n,a,s,r,i;return'\n  <div class="section-title">Specifications</div>\n  \n  <div class="detail-row">\n    <span class="detail-label">BRAND:</span>\n    <span class="detail-value">'.concat(e.brand||"N/A",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">MODEL:</span>\n    <span class="detail-value">').concat(e.name||"N/A",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">SERIAL NUMBER:</span>\n    <span class="detail-value">').concat((null===(t=e.serial_info)||void 0===t?void 0:t.serial_number)||"N/A",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">MODEL NUMBER:</span>\n    <span class="detail-value">').concat((null===(n=e.serial_info)||void 0===n?void 0:n.model_number)||"N/A",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">CASE MATERIAL:</span>\n    <span class="detail-value">').concat((null===(a=e.case_analysis)||void 0===a?void 0:a.case_material_verified)?"Verified Authentic":"Not Verified",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">CRYSTAL:</span>\n    <span class="detail-value">').concat((null===(s=e.case_analysis)||void 0===s?void 0:s.crystal_type)||"N/A",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">MOVEMENT:</span>\n    <span class="detail-value">').concat((null===(r=e.movement_analysis)||void 0===r?void 0:r.movement_caliber)||"N/A",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">CONDITION:</span>\n    <span class="detail-value">').concat((null===(i=e.performance_test)||void 0===i?void 0:i.time_setting_works)?"Excellent":"Fair",'</span>\n  </div>\n  \n  <div class="detail-row">\n    <span class="detail-label">PRODUCTION YEAR:</span>\n    <span class="detail-value">').concat(e.estimated_production_year||"N/A","</span>\n  </div>\n")},Y=e=>{var t;return'\n  <div class="verdict-section">\n    <div class="verdict-title">AUTHENTICITY VERDICT</div>\n    <div class="verdict-value">'.concat((null===(t=e.authenticity_verdict)||void 0===t?void 0:t.toUpperCase())||"PENDING REVIEW","</div>\n  </div>\n")},Z=e=>'\n  <div class="certification">\n    <div class="cert-seal">\n      CERTIFIED\n    </div>\n    <div class="signature-line"></div>\n    <div class="appraiser-info">\n      <strong>Certified Watchmaker</strong><br>\n      Watch Authentication Specialist<br>\n      License #WA-2024-001\n    </div>\n  </div>\n  \n  <div class="footer">\n    This report represents the professional opinion of a certified watch authentication specialist.\n    Report ID: AUTH'.concat(e.id," | Generated: ").concat(new Date().toLocaleDateString(),"\n  </div>\n"),G={serial_info:E.A,documents:k.A,case_analysis:R.A,dial_analysis:O.A,bracelet_analysis:I.A,movement_analysis:O.A,performance_test:I.A};function J(e){var t;let{product:n,open:s,onOpenChange:r}=e;if(!n)return null;let i=["serial_info","documents","case_analysis","dial_analysis","bracelet_analysis","movement_analysis","performance_test"];return(0,a.jsxs)(S.bL,{open:s,onOpenChange:r,children:[(0,a.jsx)(S.hJ,{className:"fixed inset-0 bg-black/40 backdrop-blur-sm"}),(0,a.jsxs)(S.UC,{className:"fixed top-1/2 left-1/2 max-h-[90vh] overflow-y-auto w-[90%] max-w-4xl -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl p-6 shadow-2xl border border-gray-100",children:[(0,a.jsx)(S.bm,{asChild:!0,children:(0,a.jsx)(m.$,{variant:"ghost",className:"absolute top-4 right-4 p-2 md:p-2","aria-label":"Close",children:(0,a.jsx)(L.A,{size:20})})}),(0,a.jsx)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(S.hE,{className:"text-2xl font-bold",children:n.brand}),(0,a.jsx)(S.VY,{className:"text-gray-500 mt-1",children:null===(t=n.serial_info)||void 0===t?void 0:t.model_number})]})}),(0,a.jsxs)(S.VY,{className:"text-gray-600 mb-4",children:["Final Summary: ",n.final_summary]}),(0,a.jsxs)(T.bL,{defaultValue:"serial_info",className:"w-full",children:[(0,a.jsx)(T.B8,{className:"flex flex-wrap border-b border-gray-200 mb-4",children:i.map(e=>{let t=G[e];return(0,a.jsxs)(T.l9,{value:e,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:text-primary",children:[(0,a.jsx)(t,{className:"w-4 h-4"})," ",Q(e)]},e)})}),i.map(e=>(0,a.jsx)(T.UC,{value:e,className:"pb-4",children:(0,a.jsx)(K,{title:Q(e),data:n[e]})},e))]}),(0,a.jsx)("div",{className:"mb-0 flex justify-end",children:(0,a.jsxs)(m.$,{className:"flex items-center gap-2 text-white",variant:"secondary",onClick:()=>{n&&F(n)},children:[(0,a.jsx)(z.A,{size:16})," Download Certificate"]})})]})]})}function K(e){let{title:t,data:n}=e,[r,i]=(0,s.useState)(null),l=Object.entries(n).filter(e=>{let[,t]=e;return"string"==typeof t&&(t.endsWith(".png")||t.endsWith(".jpg")||t.endsWith(".jpeg")||t.endsWith(".svg"))});return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 shadow-sm border border-gray-100",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:Q(t)}),l.length>0&&(0,a.jsx)("div",{className:"flex justify-between flex-wrap gap-4 mb-4",children:l.map(e=>{let[t,n]=e,s="".concat("https://stg.luxevipsuite.com","/").concat(n),r=Q(t.replace(/_path$/i,""));return(0,a.jsxs)("div",{className:"flex flex-col items-center w-full md:w-[calc(25%-1rem)]",children:[(0,a.jsx)("img",{src:s,alt:t,className:"h-32 w-auto rounded-lg cursor-pointer border border-gray-200 object-contain mb-2",onClick:()=>i(s)}),(0,a.jsx)("span",{className:"text-sm text-gray-700 text-center break-words",children:r})]},t)})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.entries(n).map(e=>{let[t,n]=e,s="notes"===t.toLowerCase()||t.toLowerCase().endsWith("_notes"),r="string"==typeof n&&(n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".svg")),i="boolean"==typeof n;return r?null:s?(0,a.jsxs)("div",{className:"col-span-full bg-white p-3 rounded-lg border border-gray-200",children:[(0,a.jsxs)("span",{className:"font-medium text-sm",children:[Q(t),":"]}),(0,a.jsx)("p",{className:"mt-1 text-gray-700 text-sm leading-relaxed",children:String(n)})]},t):(0,a.jsxs)("div",{className:"flex gap-2 items-center min-w-0",children:[(0,a.jsxs)("span",{className:"font-medium text-sm flex-shrink-0",children:[Q(t),":"]}),i?(0,a.jsx)(P.E,{className:n?"bg-black text-white":"bg-white text-black border border-black",children:n?"True":"False"}):(0,a.jsx)("span",{className:"text-gray-600 text-sm break-words",children:String(n)})]},t)})}),(0,a.jsxs)(S.bL,{open:!!r,onOpenChange:()=>i(null),children:[(0,a.jsx)(S.hJ,{className:"fixed inset-0 bg-black/50"}),(0,a.jsxs)(S.UC,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 max-h-[90vh] max-w-[90vw]",children:[(0,a.jsxs)(D.s,{children:[(0,a.jsx)(S.hE,{children:"Image Preview"}),(0,a.jsx)(S.VY,{children:"Preview of the selected document image"})]}),r&&(0,a.jsx)("img",{src:r,alt:"Preview",className:"max-h-[90vh] max-w-[90vw] rounded-lg"}),(0,a.jsx)(S.bm,{asChild:!0,children:(0,a.jsx)("button",{className:"absolute top-2 right-2 text-white bg-black/50 px-3 py-1 rounded",children:"Close"})})]})]})]})}function Q(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}var X=n(8164),q=n(7939),ee=n(3219),et=n(3580);function en(e){let{open:t,onOpenChange:n,authenticatedProductId:r}=e,[i,l]=(0,s.useState)("input"),[c,o]=(0,s.useState)(""),[x,h]=(0,s.useState)(!1),[p,f]=(0,s.useState)(""),[g,v]=(0,s.useState)(null),[b,N]=(0,s.useState)(!1),[y,w]=(0,s.useState)(""),A=(0,s.useRef)(null),_=(0,s.useRef)(null),{toast:C}=(0,et.dj)(),S=()=>{try{var e;let t=null===(e=A.current)||void 0===e?void 0:e.srcObject;t&&(t.getTracks().forEach(e=>e.stop()),A.current.srcObject=null)}catch(e){console.warn("Failed to stop video tracks:",e)}};(0,s.useEffect)(()=>{let e=null;if("scanner"===i&&A.current){let t=new ee.BrowserMultiFormatReader;return _.current=t,t.decodeFromVideoDevice(void 0,A.current,(t,n)=>{t&&!x&&(o(t.getText().split("/").pop()||""),h(!0),l("input"),null==e||e()),n&&!n.toString().includes("NotFoundException")&&console.error("QR Scan Error:",n)}).then(t=>{e=()=>{try{t.stop()}catch(e){}S(),_.current=null}}).catch(e=>{console.error("Camera error:",e),f("Cannot access camera. Please check permissions."),S(),_.current=null}),()=>{null==e||e()}}},[i,x]),(0,s.useEffect)(()=>{c&&(v("loading"),(async()=>{try{let e=await d.K.refCodeNfcCheckValidity({ref_code:c});e.valid?v("valid"):v("invalid"),w(e.message)}catch(e){v("invalid"),w("Failed to check reference code")}})())},[c]),(0,s.useEffect)(()=>{t||(l("input"),o(""),h(!1),f(""),v(null),w(""),S(),_.current=null)},[t]);let T=async()=>{if(c){N(!0);try{let e=await d.K.patchNfcLink({ref_code:c,authenticated_product_id:r});console.log(e),!0===e.success?C({title:"Success",description:e.message}):(v("invalid"),w(e.message))}catch(e){console.error(e),alert("Failed to link NFC. Please try again.")}finally{N(!1)}}};return(0,a.jsx)(u.lG,{open:t,onOpenChange:n,children:(0,a.jsx)(u.Cf,{className:"max-w-md",children:"input"===i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.c7,{children:[(0,a.jsxs)(u.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(X.A,{className:"w-5 h-5"}),"Link your NFC card"]}),(0,a.jsx)(u.rr,{children:"Provide a reference code manually or scan a QR code from your NFC card."})]}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Reference Code"}),(0,a.jsx)(j.p,{value:c,onChange:e=>o(e.target.value),placeholder:"Enter reference code"}),g&&(0,a.jsx)("p",{className:"mt-2 text-sm ".concat("valid"===g?"text-green-600":"text-red-600"),children:y})]}),(0,a.jsx)(m.$,{className:"w-full",onClick:T,disabled:"valid"!==g||b,children:b?"Linking...":"Link"}),(0,a.jsx)("div",{className:"flex items-center justify-center text-gray-400",children:(0,a.jsx)("span",{className:"text-sm",children:"Or"})}),(0,a.jsxs)(m.$,{variant:"outline",className:"w-full",onClick:()=>{l("scanner"),h(!1),f("")},children:[(0,a.jsx)(q.A,{className:"w-4 h-4 mr-2"}),"Scan QR code"]})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,a.jsx)(u.c7,{children:(0,a.jsxs)(u.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(q.A,{className:"w-5 h-5"}),"Scan QR Code"]})}),p?(0,a.jsx)("div",{className:"text-red-600 text-center",children:p}):(0,a.jsxs)("div",{className:"relative w-full h-80",children:[(0,a.jsx)("video",{ref:A,className:"w-full h-full object-cover",muted:!0,playsInline:!0}),(0,a.jsxs)("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{boxShadow:"0 0 0 9999px rgba(0,0,0,0.5)"},children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-white"}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-white"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-white"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-white"})]})]}),(0,a.jsxs)(m.$,{variant:"ghost",className:"flex items-center gap-2 text-red-600",onClick:()=>l("input"),children:[(0,a.jsx)(L.A,{className:"w-4 h-4"}),"Cancel"]})]})})})}function ea(e){let{size:t=8,color:n="blue"}=e;return(0,a.jsx)("div",{className:"flex justify-center py-6",children:(0,a.jsx)(b.P.div,{className:"w-".concat(t," h-").concat(t," border-4 border-t-").concat(n,"-500 border-gray-200 rounded-full"),animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"}})})}function es(e){var t;let{userId:n}=e,[r,i]=(0,s.useState)(""),[l,o]=(0,s.useState)([]),[u,x]=(0,s.useState)(!0),[h,p]=(0,s.useState)({current_page:1,last_page:1}),[f,g]=(0,s.useState)(1),[v,w]=(0,s.useState)(null),[A,_]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[T,E]=(0,s.useState)(null),k=e=>{e&&F(e)};(0,s.useEffect)(()=>{if(!n)return;let e=!0;return x(!0),(async()=>{try{let{data:t,meta:a}=await d.K.getAuthenticatedProducts(n,f,r);e&&(o(t),p(a))}catch(t){e&&(o([]),p({current_page:1,last_page:1}))}finally{e&&x(!1)}})(),()=>{e=!1}},[n,f,r]);let R=e=>{w(e),_(!0)};return(0,a.jsxs)(c.Zp,{className:"shadow-xl rounded-2xl border border-gray-200",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{className:"text-lg font-semibold",children:"Products"}),(0,a.jsx)(c.BT,{children:"Here are all the authenticated products created by this user."})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)(j.p,{placeholder:"Search products...",value:r,onChange:e=>{g(1),i(e.target.value)},className:"max-w-xs"})}),(0,a.jsx)("div",{className:"overflow-x-auto w-full",children:u?(0,a.jsx)(ea,{}):0===l.length?(0,a.jsx)("p",{className:"text-center py-6",children:"No products found."}):(0,a.jsxs)(N.XI,{className:"min-w-full table-auto",children:[(0,a.jsx)(N.A0,{children:(0,a.jsxs)(N.Hj,{children:[(0,a.jsx)(N.nd,{children:"Model #"}),(0,a.jsx)(N.nd,{children:"Serial #"}),(0,a.jsx)(N.nd,{children:"Name"}),(0,a.jsx)(N.nd,{children:"Brand"}),(0,a.jsx)(N.nd,{children:"Year"}),(0,a.jsx)(N.nd,{children:"Authenticity"}),(0,a.jsx)(N.nd,{className:"text-right",children:"Action"})]})}),(0,a.jsx)(N.BF,{children:l.map((e,t)=>{var n,s,r;return(0,a.jsxs)(b.P.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t,duration:.3,ease:"easeOut"},children:[(0,a.jsx)(N.nA,{children:null===(n=e.serial_info)||void 0===n?void 0:n.model_number}),(0,a.jsx)(N.nA,{children:null===(s=e.serial_info)||void 0===s?void 0:s.serial_number}),(0,a.jsx)(N.nA,{children:e.name}),(0,a.jsx)(N.nA,{children:e.brand}),(0,a.jsx)(N.nA,{children:e.estimated_production_year}),(0,a.jsx)(N.nA,{children:e.authenticity_verdict}),(0,a.jsxs)(N.nA,{className:"flex gap-2 justify-end",children:[(0,a.jsx)(m.$,{size:"sm",variant:"ghost",onClick:()=>R(e),children:(0,a.jsx)(y.A,{})}),(0,a.jsx)(m.$,{size:"sm",variant:"ghost",onClick:()=>k(e),children:(0,a.jsx)(z.A,{})}),(0,a.jsx)(m.$,{size:"sm",variant:"ghost",onClick:()=>{E(e),S(!0)},children:(0,a.jsx)(X.A,{})})]})]},null!==(r=e.id)&&void 0!==r?r:t)})})]})}),(0,a.jsxs)("div",{className:"flex justify-end mt-4 items-center space-x-4",children:[(0,a.jsx)(m.$,{size:"sm",variant:"ghost",disabled:1===f,onClick:()=>g(e=>e-1),children:"<<"}),(0,a.jsx)("span",{className:"font-semibold",children:f}),(0,a.jsx)(m.$,{size:"sm",variant:"ghost",disabled:f===h.last_page,onClick:()=>g(e=>e+1),children:">>"})]})]}),(0,a.jsx)(en,{open:C,onOpenChange:S,authenticatedProductId:null!==(t=null==T?void 0:T.id)&&void 0!==t?t:0}),(0,a.jsx)(J,{product:v,open:A,onOpenChange:_})]})}function er(){let{id:e}=(0,r.useParams)(),[t,n]=(0,s.useState)(null);if((0,s.useEffect)(()=>{e&&(async()=>{try{let t=await d.K.getUserById(e);n(t)}catch(e){console.error("Fetch user error:",e)}})()},[e]),!e||Array.isArray(e))return(0,a.jsx)("p",{children:"User ID is invalid"});if(!t)return(0,a.jsx)("p",{className:"p-4",children:"Loading user..."});let c=e=>{var n;return null==t?void 0:null===(n=t.roles)||void 0===n?void 0:n.some(t=>t.name===e)};return(0,a.jsx)(l.O,{children:(0,a.jsx)(i.N,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(v,{user:t}),c("sub_user")&&(0,a.jsx)(C,{}),c("authenticator")&&(0,a.jsx)(es,{userId:e})]})})})}E.A,k.A,R.A,O.A,I.A,O.A,I.A},7247:(e,t,n)=>{Promise.resolve().then(n.bind(n,4945))},8145:(e,t,n)=>{"use strict";n.d(t,{E:()=>l});var a=n(5155);n(2115);var s=n(2085),r=n(3999);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:n,...s}=e;return(0,a.jsx)("div",{className:(0,r.cn)(i({variant:n}),t),...s})}},8327:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var a=n(5155),s=n(8145);let r=e=>{let{status:t}=e,n="bg-orange-500 text-white";return"active"===t?n="bg-green-500 text-white":"inactive"===t&&(n="bg-red-500 text-white"),(0,a.jsx)(s.E,{className:n,children:t.charAt(0).toUpperCase()+t.slice(1)})}},8524:(e,t,n)=>{"use strict";n.d(t,{A0:()=>l,BF:()=>d,Hj:()=>c,XI:()=>i,nA:()=>m,nd:()=>o});var a=n(5155),s=n(2115),r=n(3999);let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,r.cn)("w-full caption-bottom text-sm",n),...s})})});i.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,r.cn)("[&_tr]:border-b",n),...s})});l.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,r.cn)("[&_tr:last-child]:border-0",n),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...s})});c.displayName="TableRow";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...s})});o.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...s})});m.displayName="TableCell",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",n),...s})}).displayName="TableCaption"},9840:(e,t,n)=>{"use strict";n.d(t,{Cf:()=>u,Es:()=>h,L3:()=>p,c7:()=>x,lG:()=>d,rr:()=>f,zM:()=>c});var a=n(5155),s=n(2115),r=n(5452),i=n(4416),l=n(3999);let d=r.bL,c=r.l9,o=r.ZL;r.bm;let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});m.displayName=r.hJ.displayName;let u=s.forwardRef((e,t)=>{let{className:n,children:s,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(r.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...d,children:[s,(0,a.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=r.UC.displayName;let x=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};x.displayName="DialogHeader";let h=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};h.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});p.displayName=r.hE.displayName;let f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...s})});f.displayName=r.VY.displayName},9852:(e,t,n)=>{"use strict";n.d(t,{p:()=>i});var a=n(5155),s=n(2115),r=n(3999);let i=s.forwardRef((e,t)=>{let{className:n,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...i})});i.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[690,352,244,651,73,145,900,847,279,441,684,358],()=>t(7247)),_N_E=e.O()}]);