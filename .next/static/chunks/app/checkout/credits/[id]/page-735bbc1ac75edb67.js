(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{1154:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3580:(e,s,t)=>{"use strict";t.d(s,{dj:()=>u});var a=t(2115);let r=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=n(c,e),d.forEach(e=>{e(c)})}function m(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,s]=a.useState(c);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},7242:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(9946).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8699:(e,s,t)=>{Promise.resolve().then(t.bind(t,9471))},9471:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(5155),r=t(2115),i=t(5695),l=t(8054),n=t(8482),d=t(7168),c=t(5499),o=t(6639),m=t(3580),u=t(2085),p=t(3999);let h=(0,u.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=r.forwardRef((e,s)=>{let{className:t,variant:r,...i}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,p.cn)(h({variant:r}),t),...i})});x.displayName="Alert";let y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h5",{ref:s,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})});y.displayName="AlertTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",t),...r})}).displayName="AlertDescription";var f=t(7242),v=t(1154),g=t(9946);let j=(0,g.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),N=(0,g.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function b(){let{id:e}=(0,i.useParams)(),{toast:s}=(0,m.dj)(),[t,u]=(0,r.useState)(null),[p,h]=(0,r.useState)({full_name:"",street:"",barangay:"",city:"",province:"",postal_code:"",country:"",email:"",phone:""}),[g,b]=(0,r.useState)({}),[w,S]=(0,r.useState)(null),[_,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{l.K.getAllCredits().then(s=>{var t;u((null!==(t=null==s?void 0:s.data)&&void 0!==t?t:s).find(s=>String(s.id)===String(e)))})},[e]);let T=()=>{let e={};return p.full_name.trim()||(e.full_name="Full name is required"),p.email.trim()?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(p.email)||(e.email="Invalid email format"):e.email="Email is required",p.phone.trim()?/^\d{10,11}$/.test(p.phone.replace(/\D/g,""))||(e.phone="Invalid phone number"):e.phone="Phone number is required",p.street.trim()||(e.street="Street address is required"),p.barangay.trim()||(e.barangay="Barangay is required"),p.city.trim()||(e.city="City is required"),p.province.trim()||(e.province="Province is required"),p.postal_code.trim()||(e.postal_code="Postal code is required"),p.country.trim()||(e.country="Country is required"),b(e),0===Object.keys(e).length},k=async()=>{if(S(null),!t)return;if(!T()){s({title:"Validation",description:"Please input shipping details"});return}A(!0);let e=new URLSearchParams(window.location.search),a=e.get("user"),r=e.get("added_by");try{let e=await l.K.topUpCredits({user_id:a?Number(a):void 0,added_by:r?Number(r):void 0,credit_id:t.id,quantity:t.quantity,source:"luxesuite",shipping:p}),s=(null==e?void 0:e.data)?e.data:e;s.success&&s.invoice_url?(window.open(s.invoice_url,"_blank"),setTimeout(()=>{window.location.href="/account?section=orders"},1e3)):S((null==s?void 0:s.message)||"Failed to process checkout.")}catch(e){var i,n;(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)?S(e.response.data.message):(null==e?void 0:e.message)?S(e.message):S("Checkout failed. Please try again.")}finally{A(!1)}};if(!t)return(0,a.jsx)("p",{children:"Loading..."});let C=Number("150"),E=Number(t.price)+C,O=function(e,s,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1",children:e}),(0,a.jsx)("input",{type:r,className:"border rounded-md px-3 py-2 ".concat(g[t]?"border-red-500":""),value:s,onChange:e=>h({...p,[t]:e.target.value}),placeholder:i}),g[t]&&(0,a.jsx)("span",{className:"text-red-500 text-xs mt-1",children:g[t]})]})};return(0,a.jsx)(o.O,{children:(0,a.jsx)(c.N,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Shipping Details"}),(0,a.jsx)(n.BT,{children:"Please provide accurate information for smooth delivery."})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"col-span-2",children:O("Full Name",p.full_name,"full_name","text","Enter your full name")}),O("Email",p.email,"email","email","you@example.com"),O("Phone Number",p.phone,"phone","tel","09XXXXXXXXX"),(0,a.jsx)("div",{className:"col-span-2 border-t pt-4",children:(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Address Information"})}),(0,a.jsx)("div",{className:"col-span-2",children:O("Street Address",p.street,"street","text","House No., Street Name")}),O("Barangay",p.barangay,"barangay"),O("City",p.city,"city"),O("Province",p.province,"province"),O("Postal Code",p.postal_code,"postal_code"),(0,a.jsx)("div",{className:"col-span-2",children:O("Country",p.country,"country","text","Philippines")})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Order Summary"}),(0,a.jsx)(n.BT,{children:"Review your package and charges before confirming."})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:t.name}),(0,a.jsxs)("span",{className:"font-medium",children:["₱",t.price]})]}),(0,a.jsxs)("div",{className:"ml-4 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"• Authentications"}),(0,a.jsx)("span",{children:t.quantity})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"• NFC Card"}),(0,a.jsx)("span",{children:t.quantity})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsx)("span",{children:"Shipping Fee"}),(0,a.jsxs)("span",{children:["₱",C]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-2",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["₱",E]})]}),w&&(0,a.jsxs)(x,{variant:"destructive",className:"mt-4",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)(y,{children:w})]}),(0,a.jsx)(d.$,{className:"w-full mt-4",onClick:k,disabled:_,children:_?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{children:"Processing..."})]}):"Buy Now"}),(0,a.jsxs)("div",{className:"mt-3 bg-gray-100 text-gray-700 text-xs p-3 rounded-md flex items-start space-x-2",children:[(0,a.jsx)(j,{className:"w-4 h-4 mt-0.5 text-gray-600"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Reminder:"})," Payment gateways remain active for only ",(0,a.jsx)("span",{className:"font-semibold",children:"3 hours"}),". Similarly, NFC card reservations are also held for"," ",(0,a.jsx)("span",{className:"font-semibold",children:"3 hours"}),"."]})]}),(0,a.jsxs)("div",{className:"mt-3 bg-gray-100 text-gray-700 text-xs p-3 rounded-md flex items-start space-x-2",children:[(0,a.jsx)(N,{className:"w-4 h-4 mt-0.5 text-gray-600"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"What does reserving an NFC card mean?"})," During checkout, your order will temporarily"," ",(0,a.jsx)("span",{className:"font-semibold",children:"reserve NFC cards"}),". If payment is not completed within"," ",(0,a.jsx)("span",{className:"font-semibold",children:"3 hours"}),", both the reservation and the payment gateway will expire, and you will need to place a new order."]})]})]})]})]})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[352,244,651,73,74,279,441,684,358],()=>s(8699)),_N_E=e.O()}]);