(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{2039:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(5155),i=t(2115),r=t(5695),n=t(8054),l=t(8482),d=t(7168),c=t(5499),o=t(6639),u=t(3580);function m(){let{id:e}=(0,r.useParams)(),{toast:s}=(0,u.dj)(),[t,m]=(0,i.useState)(null),[p,h]=(0,i.useState)({full_name:"",street:"",barangay:"",city:"",province:"",postal_code:"",country:"",email:"",phone:""}),[x,f]=(0,i.useState)({});(0,i.useEffect)(()=>{n.K.getAllCredits().then(s=>{var t;m((null!==(t=null==s?void 0:s.data)&&void 0!==t?t:s).find(s=>String(s.id)===String(e)))})},[e]);let y=()=>{let e={};return p.full_name.trim()||(e.full_name="Full name is required"),p.email.trim()?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(p.email)||(e.email="Invalid email format"):e.email="Email is required",p.phone.trim()?/^\d{10,11}$/.test(p.phone.replace(/\D/g,""))||(e.phone="Invalid phone number"):e.phone="Phone number is required",p.street.trim()||(e.street="Street address is required"),p.barangay.trim()||(e.barangay="Barangay is required"),p.city.trim()||(e.city="City is required"),p.province.trim()||(e.province="Province is required"),p.postal_code.trim()||(e.postal_code="Postal code is required"),p.country.trim()||(e.country="Country is required"),f(e),0===Object.keys(e).length},j=async()=>{if(!t)return;if(!y()){s({title:"Validation",description:"Please input shipping details"});return}let e=new URLSearchParams(window.location.search),a=e.get("user"),i=e.get("added_by");try{var r;let e=await n.K.topUpCredits({user_id:a?Number(a):void 0,added_by:i?Number(i):void 0,credit_id:t.id,quantity:t.quantity,shipping:p}),s=null!==(r=null==e?void 0:e.data)&&void 0!==r?r:e;s.success&&s.invoice_url?window.open(s.invoice_url,"_blank"):alert("Failed to process checkout.")}catch(e){console.error(e),alert("Checkout failed.")}};if(!t)return(0,a.jsx)("p",{children:"Loading..."});let v=Number("150"),N=Number(t.price)+v,g=function(e,s,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1",children:e}),(0,a.jsx)("input",{type:i,className:"border rounded-md px-3 py-2 ".concat(x[t]?"border-red-500":""),value:s,onChange:e=>h({...p,[t]:e.target.value}),placeholder:r}),x[t]&&(0,a.jsx)("span",{className:"text-red-500 text-xs mt-1",children:x[t]})]})};return(0,a.jsx)(o.O,{children:(0,a.jsx)(c.N,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Shipping Details"}),(0,a.jsx)(l.BT,{children:"Please provide accurate information for smooth delivery."})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"col-span-2",children:g("Full Name",p.full_name,"full_name","text","Enter your full name")}),g("Email",p.email,"email","email","you@example.com"),g("Phone Number",p.phone,"phone","tel","09XXXXXXXXX"),(0,a.jsx)("div",{className:"col-span-2 border-t pt-4",children:(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Address Information"})}),(0,a.jsx)("div",{className:"col-span-2",children:g("Street Address",p.street,"street","text","House No., Street Name")}),g("Barangay",p.barangay,"barangay"),g("City",p.city,"city"),g("Province",p.province,"province"),g("Postal Code",p.postal_code,"postal_code"),(0,a.jsx)("div",{className:"col-span-2",children:g("Country",p.country,"country","text","Philippines")})]})})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{children:"Order Summary"}),(0,a.jsx)(l.BT,{children:"Review your package and charges before confirming."})]}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:t.name}),(0,a.jsxs)("span",{className:"font-medium",children:["₱",t.price]})]}),(0,a.jsxs)("div",{className:"ml-4 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"• Authentications"}),(0,a.jsx)("span",{children:t.quantity})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"• NFC Card"}),(0,a.jsx)("span",{children:t.quantity})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsx)("span",{children:"Shipping Fee"}),(0,a.jsxs)("span",{children:["₱",v]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-2",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["₱",N]})]}),(0,a.jsx)(d.$,{className:"w-full mt-4",onClick:j,children:"Buy Now"})]})]})]})})})}},3580:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var a=t(2115);let i=0,r=new Map,n=e=>{if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=l(c,e),d.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(c);return a.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},8699:(e,s,t)=>{Promise.resolve().then(t.bind(t,2039))}},e=>{var s=s=>e(e.s=s);e.O(0,[352,244,651,73,145,279,441,684,358],()=>s(8699)),_N_E=e.O()}]);