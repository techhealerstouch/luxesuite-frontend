(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{3356:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(5155),r=s(2115),i=s(5695),l=s(8054),n=s(8482),d=s(7168),c=s(5499),o=s(6639),u=s(3580),m=s(2085),p=s(3999);let h=(0,m.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),x=r.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,p.cn)(h({variant:r}),s),...i})});x.displayName="Alert";let v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})});v.displayName="AlertTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",s),...r})}).displayName="AlertDescription";var f=s(7242);function y(){let{id:e}=(0,i.useParams)(),{toast:t}=(0,u.dj)(),[s,m]=(0,r.useState)(null),[p,h]=(0,r.useState)({full_name:"",street:"",barangay:"",city:"",province:"",postal_code:"",country:"",email:"",phone:""}),[y,g]=(0,r.useState)({}),[j,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{l.K.getAllCredits().then(t=>{var s;m((null!==(s=null==t?void 0:t.data)&&void 0!==s?s:t).find(t=>String(t.id)===String(e)))})},[e]);let b=()=>{let e={};return p.full_name.trim()||(e.full_name="Full name is required"),p.email.trim()?/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/.test(p.email)||(e.email="Invalid email format"):e.email="Email is required",p.phone.trim()?/^\d{10,11}$/.test(p.phone.replace(/\D/g,""))||(e.phone="Invalid phone number"):e.phone="Phone number is required",p.street.trim()||(e.street="Street address is required"),p.barangay.trim()||(e.barangay="Barangay is required"),p.city.trim()||(e.city="City is required"),p.province.trim()||(e.province="Province is required"),p.postal_code.trim()||(e.postal_code="Postal code is required"),p.country.trim()||(e.country="Country is required"),g(e),0===Object.keys(e).length},_=async()=>{if(N(null),!s)return;if(!b()){t({title:"Validation",description:"Please input shipping details"});return}let e=new URLSearchParams(window.location.search),a=e.get("user"),r=e.get("added_by");try{let e=await l.K.topUpCredits({user_id:a?Number(a):void 0,added_by:r?Number(r):void 0,credit_id:s.id,quantity:s.quantity,shipping:p}),t=(null==e?void 0:e.data)?e.data:e;t.success&&t.invoice_url?window.open(t.invoice_url,"_blank"):N((null==t?void 0:t.message)||"Failed to process checkout.")}catch(e){var i,n;(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)?N(e.response.data.message):(null==e?void 0:e.message)?N(e.message):N("Checkout failed. Please try again.")}};if(!s)return(0,a.jsx)("p",{children:"Loading..."});let S=Number("150"),w=Number(s.price)+S,T=function(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-1",children:e}),(0,a.jsx)("input",{type:r,className:"border rounded-md px-3 py-2 ".concat(y[s]?"border-red-500":""),value:t,onChange:e=>h({...p,[s]:e.target.value}),placeholder:i}),y[s]&&(0,a.jsx)("span",{className:"text-red-500 text-xs mt-1",children:y[s]})]})};return(0,a.jsx)(o.O,{children:(0,a.jsx)(c.N,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Shipping Details"}),(0,a.jsx)(n.BT,{children:"Please provide accurate information for smooth delivery."})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"col-span-2",children:T("Full Name",p.full_name,"full_name","text","Enter your full name")}),T("Email",p.email,"email","email","you@example.com"),T("Phone Number",p.phone,"phone","tel","09XXXXXXXXX"),(0,a.jsx)("div",{className:"col-span-2 border-t pt-4",children:(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Address Information"})}),(0,a.jsx)("div",{className:"col-span-2",children:T("Street Address",p.street,"street","text","House No., Street Name")}),T("Barangay",p.barangay,"barangay"),T("City",p.city,"city"),T("Province",p.province,"province"),T("Postal Code",p.postal_code,"postal_code"),(0,a.jsx)("div",{className:"col-span-2",children:T("Country",p.country,"country","text","Philippines")})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Order Summary"}),(0,a.jsx)(n.BT,{children:"Review your package and charges before confirming."})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:s.name}),(0,a.jsxs)("span",{className:"font-medium",children:["₱",s.price]})]}),(0,a.jsxs)("div",{className:"ml-4 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"• Authentications"}),(0,a.jsx)("span",{children:s.quantity})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"• NFC Card"}),(0,a.jsx)("span",{children:s.quantity})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsx)("span",{children:"Shipping Fee"}),(0,a.jsxs)("span",{children:["₱",S]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-2",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["₱",w]})]}),j&&(0,a.jsxs)(x,{variant:"destructive",className:"mt-4",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)(v,{children:j})]}),(0,a.jsx)(d.$,{className:"w-full mt-4",onClick:_,children:"Buy Now"})]})]})]})})})}},3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(2115);let r=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=n(c,e),d.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},7242:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8699:(e,t,s)=>{Promise.resolve().then(s.bind(s,3356))}},e=>{var t=t=>e(e.s=t);e.O(0,[352,244,651,73,145,279,441,684,358],()=>t(8699)),_N_E=e.O()}]);