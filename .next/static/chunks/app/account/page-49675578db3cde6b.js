(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{2714:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var a=t(5155),n=t(2115),r=t(968),l=t(2085),i=t(3999);let c=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.b,{ref:s,className:(0,i.cn)(c(),t),...n})});d.displayName=r.b.displayName},6940:(e,s,t)=>{Promise.resolve().then(t.bind(t,7475))},7475:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ej});var a=t(5155),n=t(2115),r=t(6639),l=t(5499),i=t(1154),c=t(3667),d=t(8054),o=t(3580),m=t(1007),u=t(1586),x=t(7108),h=t(381),p=t(8136),f=t(8482),j=t(7168);function g(e){var s;let{activeSection:t,setActiveSection:n,user:r}=e,l=[{id:"account",label:"Account Information",icon:m.A},{id:"subscription",label:"Subscription",icon:u.A},{id:"orders",label:"Orders",icon:x.A},{id:"settings",label:"Settings",icon:h.A}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"h-6 w-6 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(f.ZB,{className:"text-lg",children:null==r?void 0:r.name}),(0,a.jsx)(f.BT,{children:null==r?void 0:r.email})]})]})}),(0,a.jsx)(f.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm",children:null==r?void 0:null===(s=r.account)||void 0===s?void 0:s.name})]})})]}),(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"p-0",children:(0,a.jsx)("nav",{className:"space-y-1",children:l.map(e=>{let{id:s,label:r,icon:l}=e,i=t===s;return(0,a.jsxs)(j.$,{onClick:()=>n(s),className:"\n                    w-full justify-start\n                    rounded-md\n                    transition-colors\n                    ".concat(i?"bg-[hsl(var(--secondary))] text-white hover:bg-[hsl(var(--secondary))]":"bg-transparent text-[hsl(var(--white))] hover:bg-[hsl(var(--secondary))] hover:text-white","\n                  "),children:[(0,a.jsx)(l,{className:"mr-2 h-4 w-4 ".concat(i?"text-white":"text-[hsl(var(--primary))] group-hover:text-white")}),r]},s)})})})})]})}var v=t(9852),b=t(2714),N=t(81),y=t(5196),w=t(4229),S=t(547),P=t(3999);let C=S.bL,k=S.l9,E=n.forwardRef((e,s)=>{let{className:t,align:n="center",sideOffset:r=4,...l}=e;return(0,a.jsx)(S.ZL,{children:(0,a.jsx)(S.UC,{ref:s,align:n,sideOffset:r,className:(0,P.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});E.displayName=S.UC.displayName;var D=t(7740),A=t(7924),_=t(9840);let F=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(D.uB,{ref:s,className:(0,P.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...n})});F.displayName=D.uB.displayName;let B=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(A.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(D.uB.Input,{ref:s,className:(0,P.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...n})]})});B.displayName=D.uB.Input.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(D.uB.List,{ref:s,className:(0,P.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...n})}).displayName=D.uB.List.displayName;let R=n.forwardRef((e,s)=>(0,a.jsx)(D.uB.Empty,{ref:s,className:"py-6 text-center text-sm",...e}));R.displayName=D.uB.Empty.displayName;let z=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(D.uB.Group,{ref:s,className:(0,P.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...n})});z.displayName=D.uB.Group.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(D.uB.Separator,{ref:s,className:(0,P.cn)("-mx-1 h-px bg-border",t),...n})}).displayName=D.uB.Separator.displayName;let I=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(D.uB.Item,{ref:s,className:(0,P.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...n})});I.displayName=D.uB.Item.displayName;var L=t(7031),T=t(7270),U=t(7133);let Z=["PHP","USD","EUR"];function M(e){var s,t;let{formData:r,setFormData:l,onSubmit:c,isSaving:o}=e,[m,u]=(0,n.useState)([]),[x,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)(""),[S,D]=(0,n.useState)(!1),{currency:A,setCurrency:_}=(0,T.H)();(0,n.useEffect)(()=>{(async function(){try{let e=await d.K.getTimezones();u(e),D(!0)}catch(e){console.error("Failed to fetch timezones:",e),D(!0)}})()},[]),(0,n.useEffect)(()=>{if(S&&m.length>0&&!r.timezone){let e=Intl.DateTimeFormat().resolvedOptions().timeZone,s=m.find(s=>s.value===e)?e:m[0].value;l(e=>({...e,timezone:s}))}},[S,m,r.timezone,l]),(0,n.useEffect)(()=>{if(!r.timezone)return;let e=()=>{try{let e=new Date,s=(0,L.L_)(e,r.timezone),t=(0,L.GP)(s,"MMMM d, yyyy"),a=(0,L.GP)(s,"hh:mm a"),n=s.getTimezoneOffset(),l=Math.floor(Math.abs(n)/60),i=Math.abs(n)%60,c="GMT".concat(n<=0?"+":"-").concat(l).concat(i>0?":".concat(i.toString().padStart(2,"0")):"");g("".concat(t," ").concat(a," ").concat(r.timezone," ").concat(c))}catch(e){console.error("Error formatting time:",e),g("Invalid timezone")}};e();let s=setInterval(e,1e3);return()=>clearInterval(s)},[r.timezone]);let M=null!==(t=null===(s=m.find(e=>e.value===r.timezone))||void 0===s?void 0:s.label)&&void 0!==t?t:"Select timezone",$=e=>{let{id:s,value:t}=e.target;"businessName"===s||"slug"===s?l(e=>({...e,account:{...e.account,["businessName"===s?"name":"slug"]:t}})):l(e=>({...e,[s]:t}))},O=e=>{l(s=>({...s,timezone:e})),h(!1)};return(0,a.jsxs)(f.Zp,{children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{children:"Account Information"}),(0,a.jsx)(f.BT,{children:"Manage your personal and business details"})]}),(0,a.jsx)(f.Wu,{children:(0,a.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.J,{htmlFor:"name",children:"Full Name"}),(0,a.jsx)(v.p,{id:"name",type:"text",value:r.name,onChange:$})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(v.p,{id:"email",type:"email",value:r.email,onChange:$})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.J,{htmlFor:"businessName",children:"Business Name"}),(0,a.jsx)(v.p,{id:"businessName",type:"text",value:r.account.name,onChange:$})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.J,{htmlFor:"slug",children:"Slug"}),(0,a.jsx)(v.p,{id:"slug",type:"text",value:r.account.slug,onChange:$})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.J,{htmlFor:"phone_number",children:"Phone Number"}),(0,a.jsx)(v.p,{id:"phone_number",type:"tel",value:r.phone_number||"",onChange:$,placeholder:"Enter your phone number"})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(b.J,{htmlFor:"timezone",children:"Timezone"}),(0,a.jsxs)(C,{open:x,onOpenChange:h,children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)(j.$,{variant:"outline",role:"combobox","aria-expanded":x,className:"w-full justify-between",disabled:!S,children:S?(0,a.jsxs)(a.Fragment,{children:[M,(0,a.jsx)(N.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading timezones..."]})})}),(0,a.jsx)(E,{className:"w-[var(--radix-popover-trigger-width)] max-h-60 overflow-y-auto p-0",align:"start",children:(0,a.jsxs)(F,{children:[(0,a.jsx)(B,{placeholder:"Search timezone..."}),(0,a.jsx)(R,{children:"No timezone found."}),(0,a.jsx)(z,{children:m.map(e=>(0,a.jsxs)(I,{onSelect:()=>O(e.value),className:(0,P.cn)(r.timezone===e.value?"bg-blue-100 font-semibold":""),children:[(0,a.jsx)(y.A,{className:(0,P.cn)("mr-2 h-4 w-4",r.timezone===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})})]}),p&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-gray-100 border border-gray-200 text-gray-800 rounded text-sm font-mono",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Current time: "}),p]})]})]}),(0,a.jsx)("div",{className:"mr-4",children:(0,a.jsxs)(U.rI,{children:[(0,a.jsx)(U.ty,{asChild:!0,children:(0,a.jsx)(j.$,{variant:"outline",children:A})}),(0,a.jsx)(U.SQ,{align:"end",forceMount:!0,children:Z.map(e=>(0,a.jsx)(U._2,{onClick:()=>_(e),children:e},e))})]})}),(0,a.jsxs)(j.$,{type:"submit",disabled:o,children:[o?(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})})]})}var $=t(8524),O=t(7489);let G=n.forwardRef((e,s)=>{let{className:t,orientation:n="horizontal",decorative:r=!0,...l}=e;return(0,a.jsx)(O.b,{ref:s,decorative:r,orientation:n,className:(0,P.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",t),...l})});function H(e){var s,t;let{order:n}=e;return(0,a.jsxs)(f.Zp,{children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{children:"Order Details"}),(0,a.jsx)(f.BT,{children:"Summary of your order and payment status."})]}),(0,a.jsxs)(f.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"General Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Order #"}),(0,a.jsx)("p",{children:n.invoice_number})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Package"}),(0,a.jsx)("p",{children:n.credit_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Status"}),(0,a.jsx)("p",{children:(e=>{switch(e){case"PENDING":return(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold text-white bg-orange-500 rounded-full",children:"Pending"});case"PAID":return(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold text-white bg-green-500 rounded-full",children:"Paid"});case"EXPIRED":return(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold text-white bg-red-500 rounded-full",children:"Expired"});default:return(0,a.jsx)("span",{children:e})}})(n.status)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Date"}),(0,a.jsx)("p",{children:new Date(n.created_at).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Added by"}),(0,a.jsx)("p",{children:null===(s=n.added_by)||void 0===s?void 0:s.name})]})]})]}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Description"}),(0,a.jsxs)("p",{className:"text-sm mb-2",children:["Authentication credit top up for"," ",(0,a.jsx)("strong",{className:"text-green-500",children:null===(t=n.user)||void 0===t?void 0:t.email})," for"," ",(0,a.jsx)("strong",{className:"text-green-500",children:n.quantity})," total authentications."]})]}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Payment Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Shipping"}),(0,a.jsxs)("p",{children:["₱",n.shipping_cost]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Total"}),(0,a.jsxs)("p",{children:["₱",n.amount]})]})]}),"PENDING"===n.status&&n.payment_url&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(j.$,{variant:"default",className:"bg-primary text-white w-full sm:w-auto",asChild:!0,children:(0,a.jsx)("a",{href:n.payment_url,target:"_blank",rel:"noopener noreferrer",children:"Pay Now"})})})]})]})]})}G.displayName=O.b.displayName;var K=t(3453),W=t(9799),J=t(7340);function V(e){let{order:s}=e,{toast:t}=(0,o.dj)(),[r,l]=(0,n.useState)(s.shipment);if(!r)return(0,a.jsxs)(f.Zp,{children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{children:"Shipment Information"}),(0,a.jsx)(f.BT,{children:"No shipment details available."})]}),(0,a.jsx)(f.Wu,{children:"No shipment information available."})]});let i=[{key:"pending",label:"Pending",icon:K.A},{key:"confirmed",label:"Confirmed",icon:x.A},{key:"shipped",label:"Shipped",icon:W.A},{key:"delivered",label:"Delivered",icon:J.A}],c=(()=>{switch(r.status.toLowerCase()){case"pending":return 0;case"confirmed":return 1;case"shipped":return 2;case"delivered":return 3;case"cancelled":return -2;default:return -1}})(),m=async()=>{try{(await d.K.updateDeliverShipment(r.id)).success?(l({...r,status:"delivered"}),t({title:"Shipment Updated",description:"The shipment has been marked as delivered."})):t({title:"Error",description:"Failed to update shipment status.",variant:"destructive"})}catch(e){t({title:"Error",description:"Something went wrong while updating.",variant:"destructive"})}};return(0,a.jsxs)(f.Zp,{children:[(0,a.jsxs)(f.aR,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f.ZB,{children:"Shipment Information"}),(0,a.jsx)(f.BT,{children:"Tracking details and recipient information."})]}),"shipped"===r.status.toLowerCase()&&(0,a.jsx)(j.$,{onClick:m,className:"bg-primary hover:bg-primary/90 text-white",children:"Mark as Delivered"})]}),(0,a.jsxs)(f.Wu,{className:"space-y-4",children:["cancelled"!==r.status.toLowerCase()?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsx)("div",{className:"flex justify-center mb-4 min-w-max",children:i.map((e,s)=>{let t=e.icon,n=s<=c;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(t,{className:"h-6 w-6 ".concat(n?"text-green-500":"text-gray-400")}),(0,a.jsx)("span",{className:"text-xs sm:text-sm ".concat(n?"text-green-600":"text-gray-400"),children:e.label})]}),s<i.length-1&&(0,a.jsx)("div",{className:"h-1 w-12 mx-2 ".concat(s<c?"bg-green-500":"bg-gray-200")})]},e.key)})})}):(0,a.jsx)("p",{className:"text-red-500 font-semibold",children:"Shipment Cancelled"}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Recipient"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Name"}),(0,a.jsx)("p",{children:r.full_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Phone"}),(0,a.jsx)("p",{children:r.phone_number})]})]})]}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Address"}),(0,a.jsxs)("p",{className:"text-sm",children:[r.street,", ",r.city,", ",r.province,","," ",r.postal_code,", ",r.country]})]}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Courier Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Courier"}),(0,a.jsx)("p",{children:r.courier})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Tracking #"}),(0,a.jsx)("p",{children:r.tracking_number})]})]})]}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Item"}),(0,a.jsxs)("p",{className:"text-sm",children:["NFC Card ",s.quantity," pcs"]})]})]})]})}function q(){let{toast:e}=(0,o.dj)(),[s,t]=(0,n.useState)([]),[r,l]=(0,n.useState)([]),[c,m]=(0,n.useState)(!1),[u,x]=(0,n.useState)(null),[h,p]=(0,n.useState)(""),[g,b]=(0,n.useState)(1),[N,y]=(0,n.useState)(1);async function w(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";m(!0);try{let e=(await d.K.getOrders(s,a)).data,n=e.data||[];t(n),l(n),y(e.last_page)}catch(s){e({title:"Error",description:"Failed to load orders",variant:"destructive"})}finally{m(!1)}}return(0,n.useEffect)(()=>{let e=setTimeout(()=>{b(1),w(1,h)},500);return()=>clearTimeout(e)},[h]),(0,n.useEffect)(()=>{w(g,h)},[g]),(0,a.jsxs)(f.Zp,{className:"space-y-4",children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{children:"Orders Management"}),(0,a.jsx)(f.BT,{children:"View and manage all orders. Click on an order number to see full details and shipment information."})]}),(0,a.jsxs)(f.Wu,{className:"space-y-4",children:[(0,a.jsx)(v.p,{placeholder:"Search orders...",value:h,onChange:e=>p(e.target.value),className:"w-full"}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)($.XI,{children:[(0,a.jsx)($.A0,{children:(0,a.jsxs)($.Hj,{children:[(0,a.jsx)($.nd,{children:"Order #"}),(0,a.jsx)($.nd,{children:"Name"}),(0,a.jsx)($.nd,{children:"Status"}),(0,a.jsx)($.nd,{children:"Date Created"})]})}),(0,a.jsx)($.BF,{children:c?(0,a.jsx)($.Hj,{children:(0,a.jsx)($.nA,{colSpan:4,className:"text-center",children:(0,a.jsx)(i.A,{className:"h-5 w-5 animate-spin mx-auto"})})}):r.length>0?r.map(e=>(0,a.jsxs)($.Hj,{children:[(0,a.jsx)($.nA,{children:(0,a.jsx)("button",{onClick:()=>x(e),className:"text-blue-600 underline hover:text-blue-800",children:e.invoice_number})}),(0,a.jsx)($.nA,{children:e.credit_name}),(0,a.jsx)($.nA,{children:function(e){switch(e){case"PENDING":return(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold text-white bg-orange-500 rounded-full",children:"Pending"});case"PAID":return(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold text-white bg-green-500 rounded-full",children:"Paid"});case"EXPIRED":return(0,a.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-semibold text-white bg-red-500 rounded-full",children:"Expired"});default:return(0,a.jsx)("span",{children:e})}}(e.status)}),(0,a.jsx)($.nA,{children:new Date(e.created_at).toLocaleDateString()})]},e.id)):(0,a.jsx)($.Hj,{children:(0,a.jsx)($.nA,{colSpan:4,className:"text-center text-muted-foreground",children:"No orders found"})})})]})}),(0,a.jsx)(_.lG,{open:!!u,onOpenChange:()=>x(null),children:(0,a.jsxs)(_.Cf,{className:"max-w-3xl w-full h-[90vh] overflow-y-auto",children:[(0,a.jsx)(_.c7,{children:(0,a.jsx)(_.L3,{children:"Order Details"})}),u&&(0,a.jsxs)("div",{className:"flex flex-col gap-4 h-full",children:[(0,a.jsx)(H,{order:u}),(0,a.jsx)(V,{order:u})]})]})}),(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-4",children:[(0,a.jsx)(j.$,{variant:"outline",size:"sm",disabled:1===g,onClick:()=>b(e=>e-1),children:"Previous"}),(0,a.jsxs)("span",{className:"px-2 py-1 text-sm text-muted-foreground",children:["Page ",g," of ",N]}),(0,a.jsx)(j.$,{variant:"outline",size:"sm",disabled:g===N,onClick:()=>b(e=>e+1),children:"Next"})]})]})]})}var X=t(8145),Y=t(8933),Q=t(1930),ee=t(599);function es(e){let{subscription:s,getStatusColor:t,onUpgrade:r,onCancel:l,billingHistory:i}=e,[c,o]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),h=async()=>{o(!0);try{let e=await d.K.cancelSubscription(s.id.toString());console.log("Cancel response:",e),window.location.reload(),u(!1)}catch(e){console.error("Failed to cancel subscription:",e)}finally{o(!1)}};return i.find(e=>"SCHEDULED"===e.status),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(x.A,{className:"text-primary size-5"}),(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"free-trial"===s.payment_url?"Free Trial":"".concat(s.plan.name," | ").concat(s.plan.domain)}),(0,a.jsx)(X.E,{variant:t(s.status),children:s.status})]}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-1 text-sm",children:[(0,a.jsx)(Q.S,{amount:Number(s.plan.price.replace(/[^\d.-]/g,"")),from:"PHP"}),"/month • Access to Luxe Proof ends on"," ",s.end_date?(0,ee.GP)(new Date(s.end_date),"MMM dd, yyyy"):""]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:["pending"===s.status&&(0,a.jsx)(j.$,{variant:"default",className:"w-full sm:w-auto",onClick:()=>{s.payment_url&&(window.location.href=s.payment_url)},children:"Pay Now"}),"pending"!==s.status&&"cancelled"!==s.status&&"free-trial"!==s.payment_url&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.$,{variant:"default",className:"w-full sm:w-auto",onClick:r,children:"Upgrade Plan"}),(0,a.jsx)(j.$,{variant:"outline",className:"w-full sm:w-auto",onClick:()=>u(!0),children:"Deactivate Plan"})]})]})]})})}),(0,a.jsx)(_.lG,{open:m,onOpenChange:u,children:(0,a.jsxs)(_.Cf,{children:[(0,a.jsx)(_.c7,{children:(0,a.jsx)(_.L3,{children:"Cancel Subscription"})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to cancel your subscription? This action cannot be undone. Remaining paid months/cycles will be refunded to the payment method you've linked."}),(0,a.jsxs)(_.Es,{className:"mt-4",children:[(0,a.jsx)(j.$,{variant:"outline",onClick:()=>u(!1),disabled:c,children:"No, Keep Plan"}),(0,a.jsx)(j.$,{variant:"destructive",onClick:h,disabled:c,children:c?"Cancelling...":"Yes, Cancel"})]})]})})]})}var et=t(3904),ea=t(1788),en=t(7434);let er={PENDING:"bg-yellow-100 text-yellow-800",RETRYING:"bg-red-100 text-red-800",FAILED:"bg-red-100 text-red-800",SUCCEEDED:"bg-green-100 text-green-800",SCHEDULED:"bg-gray-100 text-gray-800"},el={SUCCEEDED:"Paid",SCHEDULED:"Upcoming",PENDING:"Pending",RETRYING:"Retrying",FAILED:"Failed"};function ei(e){let{invoices:s,isLoading:t,onPaymentSuccess:n,onRefresh:r}=e,{toast:l}=(0,o.dj)(),i=async(e,s)=>{try{let t=await d.K.forceAttempt(e,s);console.log("Advance payment result:",t),t?(l({title:"Payment Success",description:"Payment attempted successfully!"}),null==n||n()):l({title:"Payment Failed",description:"Failed to attempt payment.",variant:"destructive"})}catch(e){console.error(e),l({title:"Error",description:"Something went wrong.",variant:"destructive"})}};return(0,a.jsx)(f.Zp,{children:(0,a.jsxs)(f.Wu,{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Billing Cycle"}),(0,a.jsx)(j.$,{variant:"ghost",size:"icon",onClick:r,disabled:t,children:(0,a.jsx)(et.A,{className:"size-4"})})]}),(0,a.jsxs)(j.$,{variant:"outline",size:"sm",disabled:t,children:[(0,a.jsx)(ea.A,{className:"mr-2 size-4"}),"Download All"]})]}),t?(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Loading invoices..."}):0===s.length?(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"No billing history found."}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 border-b py-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"bg-muted rounded-md p-2",children:(0,a.jsx)(en.A,{className:"text-muted-foreground size-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:[e.id.slice(0,18),"..."]}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:e.date})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-medium ".concat(er[e.status]||"bg-gray-100 text-gray-800"),children:el[e.status]||e.status}),(0,a.jsx)(Q.S,{amount:Number(e.amount.replace(/[^\d.-]/g,"")),from:"PHP"}),"SUCCEEDED"!==e.status&&"CANCELLED"!==e.status&&"REFUNDED"!==e.status&&(0,a.jsxs)(j.$,{variant:"default",size:"sm",onClick:()=>i(e.plan_id,e.id),children:[(0,a.jsx)(u.A,{className:"mr-1 size-4"}),"Pay Now"]})]})]},e.id))})]})})}var ec=t(6699);function ed(e){let{subscription:s,availablePlans:t,onBack:r}=e,{toast:l}=(0,o.dj)(),[i,c]=(0,n.useState)("1"),[m,u]=(0,n.useState)(!1),x=(e,s)=>e*s,h=async e=>{try{u(!0),await d.K.upgradeSubscription(s.id.toString(),e.id,parseInt(i)),l({title:"Plan upgraded",description:"You've successfully upgraded to the ".concat(e.name," plan for ").concat(i," month(s).")})}catch(e){l({title:"Upgrade failed",description:"Something went wrong upgrading your plan.",variant:"destructive"})}finally{u(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(j.$,{variant:"ghost",onClick:r,children:"← Back to Subscription Details"}),(0,a.jsx)("div",{className:"mb-6 flex flex-wrap justify-center gap-2 sm:gap-3",children:["1","3","6","12"].map(e=>(0,a.jsx)("button",{className:"px-4 py-2 rounded-md font-semibold text-sm ".concat(i===e?"bg-primary text-white":"bg-muted text-muted-foreground"),onClick:()=>c(e),children:"1"===e?"Monthly":"".concat(e," Months")},e))}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:t.map(e=>{var t,n;let r=x(e.price,parseInt(i)),l=e.name===s.plan.name;return(0,a.jsxs)(f.Zp,{className:"flex flex-col",children:[(0,a.jsxs)(f.aR,{className:"text-center pb-2",children:["Professional"===e.name&&(0,a.jsx)(ec.A,{className:"uppercase w-max self-center mb-3",children:"Most popular"}),(0,a.jsx)(f.ZB,{className:"mb-7",children:e.name}),(0,a.jsxs)("span",{className:"font-bold text-2xl sm:text-3xl",children:["₱",r.toFixed(2)]})]}),(0,a.jsx)(f.BT,{className:"text-center w-11/12 mx-auto mb-4 text-sm",children:null!==(n=null===(t=e.features)||void 0===t?void 0:t[0])&&void 0!==n?n:"Flexible features"}),(0,a.jsx)(f.Wu,{className:"flex-1",children:(0,a.jsx)("ul",{className:"mt-7 space-y-2.5 text-sm",children:e.features.map((e,s)=>(0,a.jsxs)("li",{className:"flex space-x-2",children:[(0,a.jsx)(y.A,{className:"flex-shrink-0 mt-0.5 h-4 w-4"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e})]},s))})}),(0,a.jsx)(f.wL,{children:l?(0,a.jsx)(j.$,{className:"w-full",disabled:!0,children:"Current Plan"}):(0,a.jsx)(j.$,{className:"w-full",variant:"Professional"===e.name?void 0:"ghost",onClick:()=>h(e),disabled:m,children:m?"Upgrading...":"Subscribe"})})]},e.id)})})]})}function eo(e){let{open:s,onOpenChange:t,subscription:r,getStatusColor:l}=e,{toast:i}=(0,o.dj)(),[c,m]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)([]),[f,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=async()=>{if(r)try{j(!0);let e=(await d.K.getSubscriptionPlans()).data.filter(e=>e.domain===r.plan.domain&&"base"!==e.slug).map(e=>({...e,price:parseFloat(e.price),features:["Sub-user limit: ".concat(e.sub_user_limit),"Product limit: ".concat(e.product_limit)]}));p(e)}catch(e){i({title:"Failed to load plans",description:"Unable to fetch subscription plans.",variant:"destructive"})}finally{j(!1)}};s&&r&&e()},[s,r,i]);let[g,v]=(0,n.useState)([]),[b,N]=(0,n.useState)(!1),y=async()=>{if(r)try{N(!0);let e=await d.K.getBillingHistory(r.id.toString());console.log("Data getBillingHistory",e),v(e)}catch(e){i({title:"Failed to load billing history",description:"Unable to fetch invoices.",variant:"destructive"})}finally{N(!1)}};return(0,n.useEffect)(()=>{s&&r&&y()},[s,r]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(_.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(_.Cf,{className:"max-w-full sm:max-w-4xl p-4 sm:p-6 max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(_.c7,{children:(0,a.jsx)(_.L3,{children:"Subscription Details"})}),r&&!u&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(es,{subscription:r,getStatusColor:l,billingHistory:g,onUpgrade:()=>{"free-trial"!==r.payment_url&&x(!0)},onCancel:()=>{"free-trial"!==r.payment_url&&m(!0)}}),"free-trial"!==r.payment_url&&(0,a.jsx)(ei,{invoices:g,isLoading:b,onPaymentSuccess:y})]}),r&&u&&(0,a.jsx)(ed,{subscription:r,availablePlans:h,onBack:()=>x(!1)})]})})})}function em(e){var s;let{subscriptions:t,isLoading:r}=e,[l,i]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1);if(r)return(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"flex items-center justify-center py-12",children:"Loading..."})});let o=e=>{i(e),d(!0)},m=e=>{switch(e){case"active":return"default";case"pending":default:return"secondary";case"suspended":return"destructive";case"cancelled":return"outline"}},u=null!==(s=null==t?void 0:t.filter(e=>"luxeproof"!==e.service&&"luxeflip"!==e.service))&&void 0!==s?s:[];return(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between w-full gap-4 sm:gap-0",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(f.ZB,{children:"Subscription Details"}),(0,a.jsx)(f.BT,{children:"Manage your subscription and billing information"})]}),(0,a.jsx)(Y.u,{onSelectPlan:(e,s)=>{console.log("User selected plan:",e,"for months:",s)}})]})}),(0,a.jsx)(eo,{open:c,onOpenChange:d,subscription:l,getStatusColor:m}),(0,a.jsx)(f.Wu,{className:"space-y-6",children:u.length>0?(0,a.jsx)(a.Fragment,{children:u.map(e=>{var s,t;return(0,a.jsxs)("div",{onClick:()=>o(e),tabIndex:0,role:"button",onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&o(e)},className:"border rounded-lg p-4 space-y-4 cursor-pointer hover:shadow-md transition focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-base sm:text-lg",children:"free-trial"===e.payment_url?"Free Trial | ".concat(e.service):"".concat(null!==(t=null===(s=e.plan)||void 0===s?void 0:s.name)&&void 0!==t?t:"No plan available"," | ").concat(e.service)}),(0,a.jsx)(X.E,{variant:m(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),e.features&&e.features.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-sm mb-1",children:"Features Included:"}),(0,a.jsx)("ul",{className:"space-y-1 text-sm",children:e.features.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),e]},s))})]})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"No active subscription found"}),(0,a.jsx)(j.$,{className:"w-full sm:w-auto",children:"Choose a Plan"})]})})]})}var eu=t(4884);let ex=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(eu.bL,{className:(0,P.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:s,children:(0,a.jsx)(eu.zi,{className:(0,P.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});function eh(e){let{passwordData:s,setPasswordData:t,onPasswordSubmit:n,isSaving:r,accountSettings:l,onSettingsUpdate:c}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(f.Zp,{children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{children:"Change Password"}),(0,a.jsx)(f.BT,{children:"Update your account password"})]}),(0,a.jsx)(f.Wu,{children:(0,a.jsxs)("form",{onSubmit:n,className:"space-y-4",children:[[{id:"currentPassword",label:"Current Password"},{id:"newPassword",label:"New Password"},{id:"confirmPassword",label:"Confirm New Password"}].map(e=>{let{id:n,label:r}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.J,{htmlFor:n,children:r}),(0,a.jsx)(v.p,{id:n,type:"password",value:s[n],onChange:e=>t(s=>({...s,[n]:e.target.value}))})]},n)}),(0,a.jsxs)(j.$,{type:"submit",disabled:r,children:[r?(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Update Password"]})]})})]}),l&&(0,a.jsxs)(f.Zp,{children:[(0,a.jsxs)(f.aR,{children:[(0,a.jsx)(f.ZB,{children:"Preferences"}),(0,a.jsx)(f.BT,{children:"Manage your account preferences"})]}),(0,a.jsxs)(f.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Notifications"}),["email","sms"].map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(b.J,{htmlFor:"".concat(e,"-notifications"),children:"".concat(e.toUpperCase()," notifications")}),(0,a.jsx)(ex,{id:"".concat(e,"-notifications"),checked:l.notifications[e],onCheckedChange:s=>c({notifications:{...l.notifications,[e]:s}})})]},e))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Privacy"}),[{id:"profileVisible",label:"Profile visible to others"},{id:"analyticsEnabled",label:"Enable analytics tracking"}].map(e=>{let{id:s,label:t}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(b.J,{htmlFor:s,children:t}),(0,a.jsx)(ex,{id:s,checked:l.privacy[s],onCheckedChange:e=>c({privacy:{...l.privacy,[s]:e}})})]},s)})]})]})]})]})}ex.displayName=eu.bL.displayName;var ep=t(5695);function ef(e){let{activeSection:s,setActiveSection:t,isLoading:r,isSaving:l,setIsSaving:c,setIsLoading:o,currentPlans:m,setCurrentPlans:u,accountSettings:x,setAccountSettings:h,userDataLoaded:p,setUserDataLoaded:f,formData:j,setFormData:v,passwordData:b,setPasswordData:N,user:y,toast:w}=e,S=(0,ep.useSearchParams)().get("section");async function P(){o(!0);try{let e=await d.K.getSubscriptions();u(e.data)}catch(e){}finally{o(!1)}}async function C(e){if(e.preventDefault(),!j.name.trim()||!j.email.trim()){w({title:"Validation Error",description:"Name and email are required",variant:"destructive"});return}c(!0);try{await d.K.updateAccount(j),w({title:"Success",description:"Account information updated successfully"})}catch(s){let e="Failed to update account information";"object"==typeof s&&null!==s&&"message"in s&&"string"==typeof s.message&&(e=s.message),w({title:"Error",description:e,variant:"destructive"})}finally{c(!1)}}async function k(e){if(e.preventDefault(),!b.currentPassword||!b.newPassword){w({title:"Validation Error",description:"Both current and new passwords are required",variant:"destructive"});return}if(b.newPassword!==b.confirmPassword){w({title:"Validation Error",description:"New passwords do not match",variant:"destructive"});return}if(b.newPassword.length<6){w({title:"Validation Error",description:"New password must be at least 6 characters long",variant:"destructive"});return}c(!0);try{await d.K.changePassword({currentPassword:b.currentPassword,newPassword:b.newPassword}),w({title:"Success",description:"Password updated successfully"}),N({currentPassword:"",newPassword:"",confirmPassword:""})}catch(s){let e="Failed to update password";"object"==typeof s&&null!==s&&"message"in s&&"string"==typeof s.message&&(e=s.message),w({title:"Error",description:e,variant:"destructive"})}finally{c(!1)}}async function E(e){if(x){c(!0);try{let s=await d.K.updateSettings({...x,...e});h(s),w({title:"Success",description:"Settings updated successfully"})}catch(e){w({title:"Error",description:"Failed to update settings",variant:"destructive"})}finally{c(!1)}}}return(0,n.useEffect)(()=>{S&&t(S)},[S,t]),(0,n.useEffect)(()=>{"subscription"===s&&P()},[s]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Account"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences."})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,a.jsx)("div",{className:"w-full md:w-2/5 space-y-4 px-4 md:px-0",children:(0,a.jsx)(g,{activeSection:s,setActiveSection:t,user:y})}),(0,a.jsxs)("div",{className:"w-full md:w-3/5 px-4 md:px-0",children:[r&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(i.A,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading..."})]}),!r&&"account"===s&&(0,a.jsx)(M,{formData:j,setFormData:v,onSubmit:C,isSaving:l}),!r&&"subscription"===s&&(0,a.jsx)(em,{subscriptions:m,isLoading:r}),!r&&"orders"===s&&(0,a.jsx)(q,{}),!r&&"settings"===s&&(0,a.jsx)(eh,{passwordData:b,setPasswordData:N,onPasswordSubmit:k,isSaving:l,accountSettings:x,onSettingsUpdate:E})]})]})]})}function ej(){let[e,s]=(0,n.useState)(!1),[t,d]=(0,n.useState)(!1),[m,u]=(0,n.useState)([]),[x,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(!1),[j,g]=(0,n.useState)("account"),{user:v}=(0,c.A)(),{toast:b}=(0,o.dj)(),[N,y]=(0,n.useState)({id:null,name:"",email:"",phone_number:"",timezone:"",account:{name:"",slug:""}}),[w,S]=(0,n.useState)({currentPassword:"",newPassword:"",confirmPassword:""});return(0,n.useEffect)(()=>{if(v&&!p){var e,s,t;y({id:(null===(e=v.account)||void 0===e?void 0:e.id)||null,name:v.name||"",email:v.email||"",phone_number:v.phone_number||"",timezone:v.timezone||"",account:{name:(null===(s=v.account)||void 0===s?void 0:s.name)||"",slug:(null===(t=v.account)||void 0===t?void 0:t.slug)||""}}),f(!0)}},[v,p]),(0,a.jsx)(r.O,{children:(0,a.jsx)(l.N,{children:(0,a.jsx)(n.Suspense,{fallback:(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(i.A,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading..."})]}),children:(0,a.jsx)(ef,{activeSection:j,setActiveSection:g,isLoading:e,isSaving:t,setIsSaving:d,setIsLoading:s,currentPlans:m,setCurrentPlans:u,accountSettings:x,setAccountSettings:h,userDataLoaded:p,setUserDataLoaded:f,formData:N,setFormData:y,passwordData:w,setPasswordData:S,user:v,toast:b})})})})}},8524:(e,s,t)=>{"use strict";t.d(s,{A0:()=>i,BF:()=>c,Hj:()=>d,XI:()=>l,nA:()=>m,nd:()=>o});var a=t(5155),n=t(2115),r=t(3999);let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",t),...n})})});l.displayName="Table";let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b",t),...n})});i.displayName="TableHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",t),...n})});c.displayName="TableBody",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:s,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});d.displayName="TableRow";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...n})});o.displayName="TableHead";let m=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...n})});m.displayName="TableCell",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption"},9852:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(5155),n=t(2115),r=t(3999);let l=n.forwardRef((e,s)=>{let{className:t,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});l.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[352,244,651,73,74,386,567,139,279,933,441,684,358],()=>s(6940)),_N_E=e.O()}]);