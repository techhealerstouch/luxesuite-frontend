(()=>{var e={};e.id=132,e.ids=[132],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2086:(e,s,t)=>{Promise.resolve().then(t.bind(t,3047))},2766:(e,s,t)=>{Promise.resolve().then(t.bind(t,6644))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3047:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\htdocs\\\\LuxeSuite\\\\luxesuite-frontend\\\\app\\\\users\\\\edit\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\htdocs\\LuxeSuite\\luxesuite-frontend\\app\\users\\edit\\[id]\\page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4960:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=t(5239),i=t(8088),a=t(8170),n=t.n(a),l=t(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d={children:["",{children:["users",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3047)),"C:\\xampp\\htdocs\\LuxeSuite\\luxesuite-frontend\\app\\users\\edit\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8014)),"C:\\xampp\\htdocs\\LuxeSuite\\luxesuite-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\xampp\\htdocs\\LuxeSuite\\luxesuite-frontend\\app\\users\\edit\\[id]\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/users/edit/[id]/page",pathname:"/users/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6644:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(687),i=t(3210),a=t(6189),n=t(2381),l=t(865),o=t(7821),d=t(5192),c=t(8988),u=t(2597),p=t(3861);function m({userDetails:e,setUserDetails:s}){let[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)(!1),o="w-5 h-5 text-gray-500 hover:text-gray-700 transition-colors";return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"User Details"}),(0,r.jsx)(d.BT,{children:"Enter user information"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1 font-medium text-gray-700",children:"Name"}),(0,r.jsx)(c.p,{placeholder:"Full Name",value:e.name,onChange:t=>s({...e,name:t.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-1 font-medium text-gray-700",children:"Email"}),(0,r.jsx)(c.p,{type:"email",placeholder:"Email",value:e.email,onChange:t=>s({...e,email:t.target.value})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block mb-1 font-medium text-gray-700",children:"Password"}),(0,r.jsxs)("div",{className:"flex items-center relative",children:[(0,r.jsx)(c.p,{type:t?"text":"password",placeholder:"Password",className:"pr-10",value:e.password,onChange:t=>s({...e,password:t.target.value})}),(0,r.jsx)("button",{type:"button",className:"absolute right-2",onClick:()=>a(!t),children:t?(0,r.jsx)(u.A,{className:o}):(0,r.jsx)(p.A,{className:o})})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"block mb-1 font-medium text-gray-700",children:"Confirm Password"}),(0,r.jsxs)("div",{className:"flex items-center relative",children:[(0,r.jsx)(c.p,{type:n?"text":"password",placeholder:"Confirm Password",className:"pr-10",value:e.confirmPassword,onChange:t=>s({...e,confirmPassword:t.target.value})}),(0,r.jsx)("button",{type:"button",className:"absolute right-2",onClick:()=>l(!n),children:n?(0,r.jsx)(u.A,{className:o}):(0,r.jsx)(p.A,{className:o})})]})]})]})]})}var x=t(9989);function h({permissions:e,setPermissions:s}){let[t,a]=(0,i.useState)([]),n=t=>{s({...e,[t]:!e[t]})},l={};t.forEach(e=>{l[e.category]||(l[e.category]=[]),l[e.category].push(e)});let o={view_products:"Allows the user to view products",create_products:"Allows the user to create new products",edit_products:"Allows the user to edit existing products",delete_products:"Allows the user to delete products",view_brands:"Allows the user to view brands",create_brands:"Allows the user to create new brands",edit_brands:"Allows the user to edit existing brands",delete_brands:"Allows the user to delete brands",view_item_types:"Allows the user to view item types",create_item_types:"Allows the user to create item types",edit_item_types:"Allows the user to edit item types",delete_item_types:"Allows the user to delete item types"},c={products:"Give permissions for product module",brands:"Give permissions for brand module","item types":"Give permissions for item type module",general:"General permissions"};return(0,r.jsx)(x.Kq,{children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Permissions"}),(0,r.jsx)(d.BT,{children:"Assign permissions to this user"})]}),(0,r.jsx)(d.Wu,{className:"space-y-6",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(l).map(([s,t])=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"font-semibold",children:s.charAt(0).toUpperCase()+s.slice(1)}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:c[s.toLowerCase()]||"Assign permissions for this module"}),(0,r.jsx)("div",{className:"flex flex-col gap-2",children:t.map(s=>(0,r.jsxs)(x.bL,{children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:e[s.name]??!1,onChange:()=>n(s.name)}),(0,r.jsx)(x.l9,{asChild:!0,children:(0,r.jsx)("span",{className:"no-underline",children:s.label})})]}),(0,r.jsx)(x.ZL,{children:(0,r.jsxs)(x.UC,{side:"top",align:"center",sideOffset:4,className:"bg-gray-800 text-white text-sm rounded px-2 py-1 shadow-lg z-50",children:[o[s.name]||s.label,(0,r.jsx)(x.i3,{className:"fill-gray-800",offset:10})]})})]},s.name))})]},s))})})]})})}var f=t(4934),j=t(1702),b=t(1862);function g(){let e=(0,a.useRouter)(),{id:s}=(0,a.useParams)(),{toast:t}=(0,j.dj)(),[c,u]=(0,i.useState)({name:"",email:"",password:"",confirmPassword:""}),[p,x]=(0,i.useState)({}),[g,v]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!0),N=async()=>{if(c.password&&c.password!==c.confirmPassword){t({title:"Error",description:"Passwords do not match",variant:"destructive"});return}v(!0);try{await o.K.updateUserWithPermissions(s,{name:c.name,email:c.email,password:c.password||void 0,permissions:Object.keys(p).filter(e=>p[e])}),t({title:"Success",description:"User updated successfully",variant:"default"}),e.push("/users")}catch(e){console.error(e),t({title:"Error",description:e?.response?.data?.message||"Failed to update user",variant:"destructive"})}finally{v(!1)}};return(0,r.jsx)(l.O,{children:(0,r.jsx)(n.N,{children:(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Edit Sub User"}),(0,r.jsx)(d.BT,{children:"Update details and manage permissions for this sub user"})]}),(0,r.jsx)(d.Wu,{className:"space-y-6",children:w?(0,r.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,r.jsx)(b.A,{className:"h-6 w-6 animate-spin text-gray-500"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{userDetails:c,setUserDetails:u}),(0,r.jsx)(h,{permissions:p,setPermissions:x}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(f.$,{onClick:N,disabled:g,children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update User"})})]})})]})})})}},8988:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var r=t(687),i=t(3210),a=t(6241);let n=i.forwardRef(({className:e,type:s,...t},i)=>(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...t}));n.displayName="Input"},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[724,418,474,19,350,246,226],()=>t(4960));module.exports=r})();